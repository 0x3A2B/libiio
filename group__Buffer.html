<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>libiio: Buffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libiio
   </div>
   <div id="projectbrief">Library for interfacing with IIO devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Buffer</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiio__buffer.html">iio_buffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An input or output buffer, used to read or write samples.  <a href="structiio__buffer.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1d763d5165bf33152abd935000397735"><td class="memItemLeft" align="right" valign="top">__api struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga1d763d5165bf33152abd935000397735">iio_device_create_buffer</a> (const struct <a class="el" href="structiio__device.html">iio_device</a> *dev, size_t samples_count, bool is_output)</td></tr>
<tr class="memdesc:ga1d763d5165bf33152abd935000397735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an input or output buffer associated to the given device.  <a href="#ga1d763d5165bf33152abd935000397735">More...</a><br/></td></tr>
<tr class="separator:ga1d763d5165bf33152abd935000397735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba58dc2780be63fead6f09397ce90d10"><td class="memItemLeft" align="right" valign="top">__api void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#gaba58dc2780be63fead6f09397ce90d10">iio_buffer_destroy</a> (struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf)</td></tr>
<tr class="memdesc:gaba58dc2780be63fead6f09397ce90d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the given buffer.  <a href="#gaba58dc2780be63fead6f09397ce90d10">More...</a><br/></td></tr>
<tr class="separator:gaba58dc2780be63fead6f09397ce90d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1aaecd70bdb441c8faaf061672060516"><td class="memItemLeft" align="right" valign="top">__api ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga1aaecd70bdb441c8faaf061672060516">iio_buffer_refill</a> (struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf)</td></tr>
<tr class="memdesc:ga1aaecd70bdb441c8faaf061672060516"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch more samples from the hardware.  <a href="#ga1aaecd70bdb441c8faaf061672060516">More...</a><br/></td></tr>
<tr class="separator:ga1aaecd70bdb441c8faaf061672060516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1615472928ffeeff3cac8ab6cc281071"><td class="memItemLeft" align="right" valign="top">__api ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga1615472928ffeeff3cac8ab6cc281071">iio_buffer_push</a> (const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf)</td></tr>
<tr class="memdesc:ga1615472928ffeeff3cac8ab6cc281071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the samples to the hardware.  <a href="#ga1615472928ffeeff3cac8ab6cc281071">More...</a><br/></td></tr>
<tr class="separator:ga1615472928ffeeff3cac8ab6cc281071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga000d2f4c8b72060db1c38ec905bf4156"><td class="memItemLeft" align="right" valign="top">__api void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga000d2f4c8b72060db1c38ec905bf4156">iio_buffer_first</a> (const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf, const struct <a class="el" href="structiio__channel.html">iio_channel</a> *chn)</td></tr>
<tr class="memdesc:ga000d2f4c8b72060db1c38ec905bf4156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the first sample of a channel in a buffer.  <a href="#ga000d2f4c8b72060db1c38ec905bf4156">More...</a><br/></td></tr>
<tr class="separator:ga000d2f4c8b72060db1c38ec905bf4156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18d5cb8d912b5b888b9b54c6d0c7f92c"><td class="memItemLeft" align="right" valign="top">__api ptrdiff_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga18d5cb8d912b5b888b9b54c6d0c7f92c">iio_buffer_step</a> (const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf)</td></tr>
<tr class="memdesc:ga18d5cb8d912b5b888b9b54c6d0c7f92c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the step size between two samples of one channel.  <a href="#ga18d5cb8d912b5b888b9b54c6d0c7f92c">More...</a><br/></td></tr>
<tr class="separator:ga18d5cb8d912b5b888b9b54c6d0c7f92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5300f917bbdfc5dafc093a60138f131"><td class="memItemLeft" align="right" valign="top">__api void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#gab5300f917bbdfc5dafc093a60138f131">iio_buffer_end</a> (const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf)</td></tr>
<tr class="memdesc:gab5300f917bbdfc5dafc093a60138f131"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the address that follows the last sample in a buffer.  <a href="#gab5300f917bbdfc5dafc093a60138f131">More...</a><br/></td></tr>
<tr class="separator:gab5300f917bbdfc5dafc093a60138f131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8be1b9fa5383746ff8d76cedf1ff0156"><td class="memItemLeft" align="right" valign="top">__api ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Buffer.html#ga8be1b9fa5383746ff8d76cedf1ff0156">iio_buffer_foreach_sample</a> (struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *buf, ssize_t(*callback)(const struct <a class="el" href="structiio__channel.html">iio_channel</a> *chn, void *src, size_t bytes, void *d), void *data)</td></tr>
<tr class="memdesc:ga8be1b9fa5383746ff8d76cedf1ff0156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the supplied callback for each sample found in a buffer.  <a href="#ga8be1b9fa5383746ff8d76cedf1ff0156">More...</a><br/></td></tr>
<tr class="separator:ga8be1b9fa5383746ff8d76cedf1ff0156"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaba58dc2780be63fead6f09397ce90d10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api void iio_buffer_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the given buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure</td></tr>
  </table>
  </dd>
</dl>
<p><b>NOTE:</b> After that function, the <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> pointer shall be invalid. </p>

</div>
</div>
<a class="anchor" id="gab5300f917bbdfc5dafc093a60138f131"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api void* iio_buffer_end </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the address that follows the last sample in a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer corresponding to the address that follows the last sample present in the buffer </dd></dl>

</div>
</div>
<a class="anchor" id="ga000d2f4c8b72060db1c38ec905bf4156"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api void* iio_buffer_first </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structiio__channel.html">iio_channel</a> *&#160;</td>
          <td class="paramname"><em>chn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the first sample of a channel in a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
    <tr><td class="paramname">chn</td><td>A pointer to an <a class="el" href="structiio__channel.html" title="Represents an input or output channel of a device. ">iio_channel</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the first sample found, or to the end of the buffer if no sample for the given channel is present in the buffer</dd></dl>
<p><b>NOTE:</b> This fonction, coupled with iio_buffer_step and iio_buffer_end, can be used to iterate on all the samples of a given channel present in the buffer, doing the following:</p>
<pre class="fragment">for (void *ptr = iio_buffer_first(buffer, chn); ptr &lt; iio_buffer_end(buffer); ptr += iio_buffer_step(buffer)) {
   ....
}
</pre> 
</div>
</div>
<a class="anchor" id="ga8be1b9fa5383746ff8d76cedf1ff0156"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api ssize_t iio_buffer_foreach_sample </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ssize_t(*)(const struct <a class="el" href="structiio__channel.html">iio_channel</a> *chn, void *src, size_t bytes, void *d)&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call the supplied callback for each sample found in a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
    <tr><td class="paramname">callback</td><td>A pointer to a function to call for each sample found </td></tr>
    <tr><td class="paramname">data</td><td>A user-specified pointer that will be passed to the callback</td></tr>
  </table>
  </dd>
</dl>
<p><b>NOTE:</b> The callback receives four arguments:</p>
<ul>
<li>A pointer to the <a class="el" href="structiio__channel.html" title="Represents an input or output channel of a device. ">iio_channel</a> structure corresponding to the sample,</li>
<li>A pointer to the sample itself,</li>
<li>The length of the sample in bytes,</li>
<li>The user-specified pointer passed to iio_buffer_foreach_sample. </li>
</ul>

</div>
</div>
<a class="anchor" id="ga1615472928ffeeff3cac8ab6cc281071"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api ssize_t iio_buffer_push </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the samples to the hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, the number of bytes written is returned </dd>
<dd>
On error, a negative errno code is returned</dd></dl>
<p><b>NOTE:</b> Only valid for output buffers </p>

</div>
</div>
<a class="anchor" id="ga1aaecd70bdb441c8faaf061672060516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api ssize_t iio_buffer_refill </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetch more samples from the hardware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, the number of bytes read is returned </dd>
<dd>
On error, a negative errno code is returned</dd></dl>
<p><b>NOTE:</b> Only valid for input buffers </p>

</div>
</div>
<a class="anchor" id="ga18d5cb8d912b5b888b9b54c6d0c7f92c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api ptrdiff_t iio_buffer_step </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structiio__buffer.html">iio_buffer</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the step size between two samples of one channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>A pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the difference between the addresses of two consecutive samples of one same channel </dd></dl>

</div>
</div>
<a class="anchor" id="ga1d763d5165bf33152abd935000397735"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__api struct <a class="el" href="structiio__buffer.html">iio_buffer</a>* iio_device_create_buffer </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structiio__device.html">iio_device</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>samples_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an input or output buffer associated to the given device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>A pointer to an <a class="el" href="structiio__device.html" title="Represents a device in the IIO context. ">iio_device</a> structure </td></tr>
    <tr><td class="paramname">samples_count</td><td>The number of samples that the buffer should contain </td></tr>
    <tr><td class="paramname">is_output</td><td>A boolean value which should be True if the buffer is an output buffer (to write samples to the hardware) or False if the buffer is an input buffer (to read samples from the hardware) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, a pointer to an <a class="el" href="structiio__buffer.html" title="An input or output buffer, used to read or write samples. ">iio_buffer</a> structure </dd>
<dd>
On error, NULL is returned</dd></dl>
<p><b>NOTE:</b> Channels that have to be written to / read from must be enabled before creating the buffer. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 11 2014 15:33:27 for libiio by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
